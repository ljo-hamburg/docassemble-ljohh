---
features:
  navigation: true
  hide navbar: false
  hide standard menu: true
  labels above fields: true
---
objects:
  mitglied: Individual
  eltern: Individual
  bedingungen: DAObject
---
include:
  - tasks.yml
---
modules:
  - .util
  - .ljo
---
code: |
  minderjaehrig = mitglied.age_in_years() < 18
  if minderjaehrig:
    need(Elternkontakt)
---
code: |
  bedingungen.akzeptiert = all([
    bedingungen.tnbedingungen,
    bedingungen.aufnahmen,
    bedingungen.finanzierung,
    bedingungen.newsletter
  ])
  if minderjaehrig:
    bedingungen.akzeptiert = (
      bedingungen.akzeptiert and bedingungen.veranstaltungsort
    )
---
code: |
  teilnahmebedingungen = DAFile('teilnahmebedingungen')
  teilnahmebedingungen.initialize(filename="Teilnahmebedingungen.pdf")
  teilnahmebedingungen.from_url("https://ljo-hamburg.de/Teilnahmebedingungen")
  teilnahmebedingungen.commit()
---
code: |
  geschaeftsordnung = DAFile('geschaeftsordnung')
  geschaeftsordnung.initialize(filename="Geschaeftsordnung.pdf")
  geschaeftsordnung.from_url("https://ljo-hamburg.de/Geschaeftsordnung")
  geschaeftsordnung.commit()
---
code: |
  status = url_args.get("status", "normal").lower()
  if status not in ["normal", "flex", "aushilfe"]:
    status = "normal"
---
code: testmodus = url_args.get('test', False) or daten.get("Testmodus", False)
---
code: |
  if not all(task.ready() for task in [
    save_data_task,
    add_member_task,
    register_member_email_task,
    register_parent_email_task,
    member_email_task,
    orga_email_task,
    archive_registration_task
  ]):
    Warten
  else:
    Abschicken = True
---
sets: anmeldung
need: anmeldung_task
code: Warten
---
